<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
 <name>{{name}}</name>
<open>1</open>

<Style id="P1_highlight">
 <LineStyle><color>ff2f2fd3</color><width>4</width></LineStyle>
</Style>
<Style id="P1_normal">
 <LineStyle><color>ff2f2fd3</color><width>3</width></LineStyle>
</Style>
<StyleMap id="P1">
 <Pair><key>normal</key><styleUrl>#P1_normal</styleUrl></Pair>
 <Pair><key>highlight</key><styleUrl>#P1_highlight</styleUrl></Pair>
</StyleMap>

<Style id="P2_highlight">
 <LineStyle><color>ff9f3f30</color><width>4</width></LineStyle>
</Style>
<Style id="P2_normal">
 <LineStyle><color>ff9f3f30</color><width>3</width></LineStyle>
</Style>
<StyleMap id="P2">
 <Pair><key>normal</key><styleUrl>#P2_normal</styleUrl></Pair>
 <Pair><key>highlight</key><styleUrl>#P2_highlight</styleUrl></Pair>
</StyleMap>

<Style id="PA_highlight">
 <LineStyle><color>ff3c8e38</color><width>4</width></LineStyle>
</Style>
<Style id="PA_normal">
 <LineStyle><color>ff3c8e38</color><width>3</width></LineStyle>
</Style>
<StyleMap id="PA">
 <Pair><key>normal</key><styleUrl>#PA_normal</styleUrl></Pair>
 <Pair><key>highlight</key><styleUrl>#PA_highlight</styleUrl></Pair>
</StyleMap>
  
<Style id="Water_normal">
 <IconStyle>
  <scale>0.75</scale>
  <Icon><href>https://earth.google.com/earth/rpc/cc/icon?color=1976d2&amp;id=2346&amp;scale=4</href></Icon>
  <hotSpot x="64" y="128" xunits="pixels" yunits="insetPixels"/>
 </IconStyle>
</Style>
<Style id="Water_highlight">
 <IconStyle>
  <scale>0.9</scale>
  <Icon><href>https://earth.google.com/earth/rpc/cc/icon?color=1976d2&amp;id=2346&amp;scale=4</href></Icon>
  <hotSpot x="64" y="128" xunits="pixels" yunits="insetPixels"/>
 </IconStyle>
</Style>
<StyleMap id="Water">
 <Pair><key>normal</key><styleUrl>#Water_normal</styleUrl></Pair>
 <Pair><key>highlight</key><styleUrl>#Water_highlight</styleUrl></Pair>
</StyleMap>


<Style id="Other_normal">
 <IconStyle>
  <scale>0.75</scale>
  <Icon><href>https://earth.google.com/earth/rpc/cc/icon?color=ef5350&amp;id=2003&amp;scale=4</href></Icon>
  <hotSpot x="64" y="128" xunits="pixels" yunits="insetPixels"/>
 </IconStyle>
</Style>
<Style id="Other_highlight">
 <IconStyle>
  <scale>0.9</scale>
  <Icon><href>https://earth.google.com/earth/rpc/cc/icon?color=ef5350&amp;id=2003&amp;scale=4</href></Icon>
  <hotSpot x="64" y="128" xunits="pixels" yunits="insetPixels"/>
 </IconStyle>
</Style>
<StyleMap id="Other">
 <Pair><key>normal</key><styleUrl>#Other_normal</styleUrl></Pair>
 <Pair><key>highlight</key><styleUrl>#Other_highlight</styleUrl></Pair>
</StyleMap>
 
{% for passage in passages %}
<Folder>
 <name>{{passage.formatted_name()}}</name>
 <Placemark>
  <name>{{passage.formatted_name()}}</name>
  <styleUrl>#{{ passage.style() }}</styleUrl>
  <MultiGeometry>
   <LineString>
    <tessellate>1</tessellate>
    <coordinates>
    {% for p in passage.track() %}{{p.lon}},{{p.lat}},{{p.ele}} {% endfor %}
    </coordinates>
   </LineString>
  </MultiGeometry>
 </Placemark>
 <Folder>
  <name>Waypoints</name>
  {% for p in passage.waypoints(allowed_waypoint_types) %}
  <Placemark>
   <name>{{p.name}}</name>{% if p.comment %}<description>{{p.comment}}</description>{% endif %}
   <styleUrl>#{{ p.style() }}</styleUrl>
   <Point><coordinates>{{p.lon}},{{p.lat}},{{p.ele}}</coordinates></Point>
  </Placemark>{% endfor %}
 </Folder>
</Folder>
{% endfor %}
</Document>
</kml>
